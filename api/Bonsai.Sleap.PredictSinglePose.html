<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class PredictSinglePose | Bonsai.SLEAP </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class PredictSinglePose | Bonsai.SLEAP ">
      
      <meta name="description" content="Represents an operator that performs markerless, single instance, pose estimation for each image in the sequence using a SLEAP model.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/bonsai-rx/sleap/blob/main/docs/apidoc/Bonsai_Sleap_PredictSinglePose.md/#L2">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="Bonsai - SLEAP">
            Bonsai - SLEAP
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Bonsai.Sleap.PredictSinglePose">



  <h1 id="Bonsai_Sleap_PredictSinglePose" data-uid="Bonsai.Sleap.PredictSinglePose" class="text-break">
Class PredictSinglePose  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L19"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Bonsai.html">Bonsai</a>.<a class="xref" href="Bonsai.Sleap.html">Sleap</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Bonsai.Sleap.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Represents an operator that performs markerless, single instance, pose
estimation for each image in the sequence using a SLEAP model.</p>
</div>
  <div class="markdown conceptual"><p>Almost all SLEAP operators afford the detection of multiple instances for each incoming image. However, in certain cases we might be interested in only identifying a single object in the incoming image. This strategy offers multiple advantages, specifically in terms of performance. In Bonsai.SLEAP, this functionality is implemented using the <a class="xref" href="Bonsai.Sleap.PredictSinglePose.html"><code>PredictSinglePose</code></a> operator that implements a <a href="https://sleap.ai/api/sleap.nn.config.model.html?highlight=centered%20instanc#sleap.nn.config.model.CenteredInstanceConfmapsHeadConfig"><em>single_instance</em> network</a>. Since the centroid detection step is not performed by the network, the operator expects an already centered instance on which it will run the pose estimation. Moreover, the network will always return a single output per incoming frame, even if no valid instances are detected.</p>
<p>The following example workflow highlights how combining <a href="https://circuitdigest.com/tutorial/image-segmentation-using-opencv#:%7E:text=Image%20segmentation%20is%20a%20process,the%20parts%20of%20an%20image.">basic computer-vision algorithm for image segmentation</a> for centroid detection, with the network-based pose estimation, results in &gt;2-fold increases in performance relative to the previously introduced <a class="xref" href="Bonsai.Sleap.PredictPoses.html"><code>PredictPoses</code></a> operator. In this example, the first part of the workflow segments and detects the centroid positions (output of <a class="xref" href="https://bonsai-rx.org/docs/api/Bonsai.Vision.BinaryRegionAnalysis.html"><code>BinaryRegionAnalysis</code></a>) of all available objects in the incoming frame, which are then combined with the original image to generate centered crops (<a class="xref" href="https://bonsai-rx.org/docs/api/Bonsai.Vision.CropCenter.html"><code>CropCenter</code></a>). These images are then pushed through the network that will perform the pose estimation step of the process.</p>
<div class="workflow"><p><img src="../workflows/SingleInstanceModel.bonsai" alt="SingleInstanceModel"></p>
</div>
<p>Finally, it is worth noting that <a class="xref" href="Bonsai.Sleap.PredictSinglePose.html"><code>PredictSinglePose</code></a> affords two input overloads. When receiving a single image it will output a corresponding <a class="xref" href="Bonsai.Sleap.Pose.html"><code>Pose</code></a>. Since the operator skips the centroid-detection stage, it won't embed a <a class="xref" href="Bonsai.Sleap.Centroid.html"><code>Centroid</code></a> field in <a class="xref" href="Bonsai.Sleap.Pose.html"><code>Pose</code></a>. Alternatively, a <em>batch</em> mode can be accessed by providing an array of images to the operator, instead returning <a class="xref" href="Bonsai.Sleap.PoseCollection.html"><code>PoseCollection</code></a>. This latter overload results in dramatic performance gains relative to single images.</p>
</div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class PredictSinglePose : Transform&lt;IplImage, Pose&gt;</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="https://bonsai-rx.org/docs/api/Bonsai.Combinator-2.html">Combinator</a>&lt;<a class="xref" href="https://horizongir.github.io/opencv.net/api/OpenCV.Net.IplImage.html">IplImage</a>, <a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a>&gt;</div>
      <div><a class="xref" href="https://bonsai-rx.org/docs/api/Bonsai.Transform-2.html">Transform</a>&lt;<a class="xref" href="https://horizongir.github.io/opencv.net/api/OpenCV.Net.IplImage.html">IplImage</a>, <a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a>&gt;</div>
      <div><span class="xref">PredictSinglePose</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iobservable-1">Combinator&lt;IplImage, Pose&gt;.Process(IObservable&lt;IplImage&gt;)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="properties">Properties
</h2>


  <a id="Bonsai_Sleap_PredictSinglePose_ColorConversion_" data-uid="Bonsai.Sleap.PredictSinglePose.ColorConversion*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_ColorConversion" data-uid="Bonsai.Sleap.PredictSinglePose.ColorConversion">
  ColorConversion
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L62"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets a value specifying the optional color conversion used to prepare
RGB video frames for inference. If no value is specified, no color conversion
is performed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ColorConversion? ColorConversion { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><span class="xref">ColorConversion</span>?</dt>
    <dd></dd>
  </dl>








  <a id="Bonsai_Sleap_PredictSinglePose_ModelFileName_" data-uid="Bonsai.Sleap.PredictSinglePose.ModelFileName*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_ModelFileName" data-uid="Bonsai.Sleap.PredictSinglePose.ModelFileName">
  ModelFileName
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L27"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets a value specifying the path to the exported Protocol Buffer
file containing the pretrained SLEAP model.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[FileNameFilter(&quot;Protocol Buffer Files(*.pb)|*.pb&quot;)]
public string ModelFileName { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>








  <a id="Bonsai_Sleap_PredictSinglePose_PartMinConfidence_" data-uid="Bonsai.Sleap.PredictSinglePose.PartMinConfidence*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_PartMinConfidence" data-uid="Bonsai.Sleap.PredictSinglePose.PartMinConfidence">
  PartMinConfidence
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L45"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets a value specifying the confidence threshold used to discard predicted
body part positions. If no value is specified, all estimated positions are returned.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[Range(0, 1)]
public float? PartMinConfidence { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.single">float</a>?</dt>
    <dd></dd>
  </dl>








  <a id="Bonsai_Sleap_PredictSinglePose_ScaleFactor_" data-uid="Bonsai.Sleap.PredictSinglePose.ScaleFactor*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_ScaleFactor" data-uid="Bonsai.Sleap.PredictSinglePose.ScaleFactor">
  ScaleFactor
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L54"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets a value specifying the scale factor used to resize video frames
for inference. If no value is specified, no resizing is performed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public float? ScaleFactor { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.single">float</a>?</dt>
    <dd></dd>
  </dl>








  <a id="Bonsai_Sleap_PredictSinglePose_TrainingConfig_" data-uid="Bonsai.Sleap.PredictSinglePose.TrainingConfig*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_TrainingConfig" data-uid="Bonsai.Sleap.PredictSinglePose.TrainingConfig">
  TrainingConfig
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L36"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets a value specifying the path to the configuration JSON file
containing training metadata.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[FileNameFilter(&quot;Config Files(*.json)|*.json|All Files|*.*&quot;)]
public string TrainingConfig { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="Bonsai_Sleap_PredictSinglePose_Process_" data-uid="Bonsai.Sleap.PredictSinglePose.Process*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_Process_System_IObservable_OpenCV_Net_IplImage____" data-uid="Bonsai.Sleap.PredictSinglePose.Process(System.IObservable{OpenCV.Net.IplImage[]})">
  Process(IObservable&lt;IplImage[]&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L75"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Performs markerless, single instance, batched pose estimation for each array
of images in an observable sequence using a SLEAP model.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IObservable&lt;IList&lt;Pose&gt;&gt; Process(IObservable&lt;IplImage[]&gt; source)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>source</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iobservable-1">IObservable</a>&lt;<a class="xref" href="https://horizongir.github.io/opencv.net/api/OpenCV.Net.IplImage.html">IplImage</a>[]&gt;</dt>
    <dd><p>The sequence of image batches from which to extract the poses.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iobservable-1">IObservable</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ilist-1">IList</a>&lt;<a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a>&gt;&gt;</dt>
    <dd><p>A sequence of <a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a> collection objects representing the results
of pose estimation for each image batch in the <code class="paramref">source</code>
sequence.</p>
</dd>
  </dl>











  <a id="Bonsai_Sleap_PredictSinglePose_Process_" data-uid="Bonsai.Sleap.PredictSinglePose.Process*"></a>

  <h3 id="Bonsai_Sleap_PredictSinglePose_Process_System_IObservable_OpenCV_Net_IplImage__" data-uid="Bonsai.Sleap.PredictSinglePose.Process(System.IObservable{OpenCV.Net.IplImage})">
  Process(IObservable&lt;IplImage&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L174"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Performs markerless, single instance, pose estimation for each image in
an observable sequence using a SLEAP model.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override IObservable&lt;Pose&gt; Process(IObservable&lt;IplImage&gt; source)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>source</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iobservable-1">IObservable</a>&lt;<a class="xref" href="https://horizongir.github.io/opencv.net/api/OpenCV.Net.IplImage.html">IplImage</a>&gt;</dt>
    <dd><p>The sequence of images from which to extract the pose.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iobservable-1">IObservable</a>&lt;<a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a>&gt;</dt>
    <dd><p>A sequence of <a class="xref" href="Bonsai.Sleap.Pose.html">Pose</a> objects representing the result of pose
estimation for each image in the <code class="paramref">source</code> sequence.</p>
</dd>
  </dl>











  <h2 id="seealso">See Also</h2>
  <div class="seealso">
      <div><a class="xref" href="Bonsai.Sleap.PredictCentroids.html">PredictCentroids</a></div>
      <div><a class="xref" href="Bonsai.Sleap.PredictPoses.html">PredictPoses</a></div>
      <div><a class="xref" href="Bonsai.Sleap.PredictPoseIdentities.html">PredictPoseIdentities</a></div>
      <div><a class="xref" href="Bonsai.Sleap.GetBodyPart.html">GetBodyPart</a></div>
  </div>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/bonsai-rx/sleap/blob/main/src/Bonsai.Sleap/PredictSinglePose.cs/#L19" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          &copy; 2024 Bonsai Foundation CIC and Contributors. Made with <a href="https://dotnet.github.io/docfx">docfx</a>
        </div>
      </div>
    </footer>
  </body>
</html>
